<link rel="stylesheet" href="./capture/camera.css">
<script type="module">
import { positionGreenFrame, captureFromGreenFrame } from "./capture/capture.js";

const video = document.getElementById("video");
const band = document.getElementById("band");
const scanner = document.getElementById("scanner");
const preview = document.getElementById("preview");

navigator.mediaDevices.getUserMedia({ video:{ facingMode:"environment" }})
.then(stream => {
  video.srcObject = stream;
  requestAnimationFrame(() => positionGreenFrame(scanner, band));
});

document.getElementById("snap").onclick = async () => {
  const img = await captureFromGreenFrame({ video, band, scanner });
  preview.src = img;
};
</script>
